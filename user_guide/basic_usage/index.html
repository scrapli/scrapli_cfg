
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Network device configuration management with scrapli">
      
      
        <meta name="author" content="Carl Montanari">
      
      
        <link rel="canonical" href="https://scrapli.github.io/user_guide/basic_usage/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.3.9">
    
    
      
        <title>Basic Usage - Scrapli Cfg</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="#000000">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="black" data-md-color-accent="teal">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#basic-usage" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Scrapli Cfg" class="md-header__button md-logo" aria-label="Scrapli Cfg" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Scrapli Cfg
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Basic Usage
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/scrapli/scrapli_cfg" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    scrapli/scrapli_cfg
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Scrapli Cfg" class="md-nav__button md-logo" aria-label="Scrapli Cfg" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Scrapli Cfg
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/scrapli/scrapli_cfg" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    scrapli/scrapli_cfg
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Scrapli Cfg
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          User Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="User Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          User Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart/" class="md-nav__link">
        Quick Start Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../project_details/" class="md-nav__link">
        Project Details
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../versioning/" class="md-nav__link">
        Versioning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Basic Usage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Basic Usage
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#picking-the-right-driver" class="md-nav__link">
    Picking the right Driver
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#driver-arguments" class="md-nav__link">
    Driver Arguments
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scrapli_cfg-methods" class="md-nav__link">
    scrapli_cfg Methods
  </a>
  
    <nav class="md-nav" aria-label="scrapli_cfg Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-version" class="md-nav__link">
    Get Version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-config" class="md-nav__link">
    Get Config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-checkpoint-nxos-only" class="md-nav__link">
    Get Checkpoint (NXOS Only)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load-config" class="md-nav__link">
    Load Config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#abort-config" class="md-nav__link">
    Abort Config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commit-config" class="md-nav__link">
    Commit Config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diff-config" class="md-nav__link">
    Diff Config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#render-substituted-config" class="md-nav__link">
    Render Substituted Config
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#on-prepare" class="md-nav__link">
    On Prepare
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          API Docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="API Docs" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          API Docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1">
          Platforms
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Platforms" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          Platforms
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_1" type="checkbox" id="__nav_3_1_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_1">
          Base
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Base" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_1_1">
          <span class="md-nav__icon md-icon"></span>
          Base
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/platform/base/async_platform/" class="md-nav__link">
        Base Platform
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/platform/base/async_platform/" class="md-nav__link">
        Async Platform
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/platform/base/sync_platform/" class="md-nav__link">
        Sync Platform
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_2" type="checkbox" id="__nav_3_1_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_2">
          Core
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Core" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_1_2">
          <span class="md-nav__icon md-icon"></span>
          Core
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_2_1" type="checkbox" id="__nav_3_1_2_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_2_1">
          Arista EOS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Arista EOS" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_1_2_1">
          <span class="md-nav__icon md-icon"></span>
          Arista EOS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/platform/core/arista_eos/async_platform/" class="md-nav__link">
        Base Platform
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/platform/core/arista_eos/async_platform/" class="md-nav__link">
        Async Platform
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/platform/core/arista_eos/sync_platform/" class="md-nav__link">
        Sync Platform
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/platform/core/arista_eos/patterns/" class="md-nav__link">
        Patterns
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_2_2" type="checkbox" id="__nav_3_1_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_2_2">
          Cisco IOSXE
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Cisco IOSXE" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_1_2_2">
          <span class="md-nav__icon md-icon"></span>
          Cisco IOSXE
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/platform/core/cisco_iosxe/async_platform/" class="md-nav__link">
        Base Platform
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/platform/core/cisco_iosxe/async_platform/" class="md-nav__link">
        Async Platform
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/platform/core/cisco_iosxe/sync_platform/" class="md-nav__link">
        Sync Platform
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/platform/core/cisco_iosxe/patterns/" class="md-nav__link">
        Patterns
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_2_3" type="checkbox" id="__nav_3_1_2_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_2_3">
          Cisco IOSXR
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Cisco IOSXR" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_1_2_3">
          <span class="md-nav__icon md-icon"></span>
          Cisco IOSXR
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/platform/core/cisco_iosxr/async_platform/" class="md-nav__link">
        Base Platform
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/platform/core/cisco_iosxr/async_platform/" class="md-nav__link">
        Async Platform
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/platform/core/cisco_iosxr/sync_platform/" class="md-nav__link">
        Sync Platform
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/platform/core/cisco_iosxr/patterns/" class="md-nav__link">
        Patterns
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_2_4" type="checkbox" id="__nav_3_1_2_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_2_4">
          Cisco NXOS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Cisco NXOS" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_1_2_4">
          <span class="md-nav__icon md-icon"></span>
          Cisco NXOS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/platform/core/cisco_nxos/async_platform/" class="md-nav__link">
        Base Platform
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/platform/core/cisco_nxos/async_platform/" class="md-nav__link">
        Async Platform
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/platform/core/cisco_nxos/sync_platform/" class="md-nav__link">
        Sync Platform
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/platform/core/cisco_nxos/patterns/" class="md-nav__link">
        Patterns
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_2_5" type="checkbox" id="__nav_3_1_2_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_2_5">
          Juniper JUNOS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Juniper JUNOS" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_1_2_5">
          <span class="md-nav__icon md-icon"></span>
          Juniper JUNOS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/platform/core/juniper_junos/async_platform/" class="md-nav__link">
        Base Platform
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/platform/core/juniper_junos/async_platform/" class="md-nav__link">
        Async Platform
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/platform/core/juniper_junos/sync_platform/" class="md-nav__link">
        Sync Platform
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/platform/core/juniper_junos/patterns/" class="md-nav__link">
        Patterns
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/diff/" class="md-nav__link">
        Diff
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/exceptions/" class="md-nav__link">
        Exceptions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/factory/" class="md-nav__link">
        Factory
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/logging/" class="md-nav__link">
        Logging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api_docs/response/" class="md-nav__link">
        Response
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        Changelog
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          More Scrapli
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="More Scrapli" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          More Scrapli
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../more_scrapli/scrapli/" class="md-nav__link">
        Scrapli
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../more_scrapli/scrapli_netconf/" class="md-nav__link">
        Scrapli Netconf
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../more_scrapli/scrapli_community/" class="md-nav__link">
        Scrapli Community
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../more_scrapli/scrapli_replay/" class="md-nav__link">
        Scrapli Replay
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../more_scrapli/nornir_scrapli/" class="md-nav__link">
        Nornir Scrapli
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Other
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Other" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Other
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../about/contributing/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../about/code_of_conduct/" class="md-nav__link">
        Code of Conduct
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#picking-the-right-driver" class="md-nav__link">
    Picking the right Driver
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#driver-arguments" class="md-nav__link">
    Driver Arguments
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scrapli_cfg-methods" class="md-nav__link">
    scrapli_cfg Methods
  </a>
  
    <nav class="md-nav" aria-label="scrapli_cfg Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-version" class="md-nav__link">
    Get Version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-config" class="md-nav__link">
    Get Config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-checkpoint-nxos-only" class="md-nav__link">
    Get Checkpoint (NXOS Only)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#load-config" class="md-nav__link">
    Load Config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#abort-config" class="md-nav__link">
    Abort Config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commit-config" class="md-nav__link">
    Commit Config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diff-config" class="md-nav__link">
    Diff Config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#render-substituted-config" class="md-nav__link">
    Render Substituted Config
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#on-prepare" class="md-nav__link">
    On Prepare
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="basic-usage">Basic Usage<a class="headerlink" href="#basic-usage" title="Permanent link">&para;</a></h1>
<h2 id="picking-the-right-driver">Picking the right Driver<a class="headerlink" href="#picking-the-right-driver" title="Permanent link">&para;</a></h2>
<p>When using scrapli_cfg, you will need to ensure that you are building a scrapli_cfg object specific to the target 
device. You can create your connection object directly from the appropriate scrapli_cfg class, i.e., 
<code>ScrapliCfgIOSXE</code>, or you can use the "factory" function to appropriately dispatch the class type based on a provided 
<code>conn</code> object (scrapli connection object). A simple example of creating a scrapli_cfg object by both methods is below:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">scrapli</span> <span class="kn">import</span> <span class="n">Scrapli</span>
<span class="kn">from</span> <span class="nn">scrapli_cfg.platform.core.cisco_iosxe</span> <span class="kn">import</span> <span class="n">ScrapliCfgIOSXE</span>
<span class="kn">from</span> <span class="nn">scrapli_cfg</span> <span class="kn">import</span> <span class="n">ScrapliCfg</span>

<span class="n">device</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;172.18.0.11&quot;</span><span class="p">,</span>
   <span class="s2">&quot;auth_username&quot;</span><span class="p">:</span> <span class="s2">&quot;vrnetlab&quot;</span><span class="p">,</span>
   <span class="s2">&quot;auth_password&quot;</span><span class="p">:</span> <span class="s2">&quot;VR-netlab9&quot;</span><span class="p">,</span>
   <span class="s2">&quot;auth_strict_key&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
   <span class="s2">&quot;platform&quot;</span><span class="p">:</span> <span class="s2">&quot;cisco_iosxe&quot;</span>
<span class="p">}</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">Scrapli</span><span class="p">(</span><span class="o">**</span><span class="n">device</span><span class="p">)</span>
<span class="n">cfg_conn_from_specific_platform_class</span> <span class="o">=</span> <span class="n">ScrapliCfgIOSXE</span><span class="p">(</span><span class="n">conn</span><span class="o">=</span><span class="n">conn</span><span class="p">)</span>
<span class="n">cfg_conn_from_factory</span> <span class="o">=</span> <span class="n">ScrapliCfg</span><span class="p">(</span><span class="n">conn</span><span class="o">=</span><span class="n">conn</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>The available platform names are:</p>
<ul>
<li><code>arista_eos</code></li>
<li><code>cisco_iosxe</code></li>
<li><code>cisco_iosxr</code></li>
<li><code>cisco_nxos</code></li>
<li><code>juniper_junos</code></li>
</ul>
<h2 id="driver-arguments">Driver Arguments<a class="headerlink" href="#driver-arguments" title="Permanent link">&para;</a></h2>
<p>scrapli_cfg doesn't have a ton of arguments/options that you need to worry about! The most important argument is the 
<code>conn</code> argument -- which is expecting a scrapli connection that is built from the <code>NetworkDriver</code>. This connection 
must be from one of the "core" scrapli platforms (EOS, IOSXE, IOSXR, NXOS, JunOS).</p>
<p>The other remaining primary arguments are as follows:</p>
<ul>
<li><code>config_sources</code>: Generally ignored/handled by the platform implementation for you. A list of strings representing 
  the valid config sources, i.e. "running", "candidate", or "startup"</li>
<li><code>on_prepare</code>: A callable (sync or async depending on your code of course) that is executed during the <code>prepare</code> 
  method; initially scrapli-cfg contained a default callable that would disable console logging (in most cases), 
  however as this actually made changes to your device that were somewhat "magic" it was removed. Now, users can 
  pass an <code>on_prepare</code> callable to disable console logging, or really anything else they want. This callable should 
  accept <code>cls</code> as the first argument which is a reference to the scrapli-cfg object itself (and thus has access to 
  the underlying scrapli connection). More on this in the <a href="#on-prepare"><code>on_prepare</code> section</a>.</li>
<li><code>dedicated_connection</code>: If <code>False</code> (default value) scrapli cfg will not open or close the underlying scrapli 
  connection and will raise an exception if the scrapli connection is not open. If <code>True</code> it will automatically open 
  and close the scrapli connection when using with a context manager, <code>prepare</code> will open the scrapli connection (if 
  not already open), and <code>close</code> will close the scrapli connection.</li>
<li><code>ignore_version</code>: Ignore checking device version support; currently this just means that scrapli-cfg will not 
  fetch the device version during the prepare phase, however this will (hopefully) be used in the future to limit 
  what methods can be used against a target device. For example, for EOS devices we need &gt; 4.14 to load configs; so 
  if a device is encountered at 4.13 the version check would raise an exception rather than just failing in a 
  potentially awkward fashion.</li>
</ul>
<p>There are no additional arguments for creating a scrapli_cfg object, though each platform may have other 
optional arguments as necessary -- check the docs/class for those.</p>
<h2 id="scrapli_cfg-methods">scrapli_cfg Methods<a class="headerlink" href="#scrapli_cfg-methods" title="Permanent link">&para;</a></h2>
<p>scrapli_cfg methods are mostly intended at managing device configuration, though there are a few extra methods in 
there as well. The following sections provide a brief description and example of how to use the main public methods.</p>
<p>Note that nearly all public methods in scrapli_cfg will return a <code>ScrapliCfgResponse</code> object that will contain a 
<code>result</code> attribute of the result of the given task, as well as the underlying scrapli <code>Response</code> object, and the 
usual scrapli attributes like start/finish/elapsed time, a <code>failed</code> attribute, and a <code>raise_for_status</code> method.</p>
<h3 id="get-version">Get Version<a class="headerlink" href="#get-version" title="Permanent link">&para;</a></h3>
<p>The <code>get_version</code> method does exactly what you would expect it to -- it fetches the version string from the target 
device. scrapli_cfg very intentionally has no "getters" (in the NAPALM-sense) except for <code>get_version</code> 
and <code>get_config</code> -- this is because there is no desire to maintain support for getters across a huge variety of 
versions/platforms. That said, the <code>get_version</code> method was implemented in order to (obviously) fetch device 
versions to (in the future) be used to validate the target device version supports all features that scrapli_cfg 
needs in order to manage the configurations. </p>
<p>A simple example of fetching and printing the device version:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">scrapli</span> <span class="kn">import</span> <span class="n">Scrapli</span>
<span class="kn">from</span> <span class="nn">scrapli_cfg</span> <span class="kn">import</span> <span class="n">ScrapliCfg</span>

<span class="n">device</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;172.18.0.11&quot;</span><span class="p">,</span>
   <span class="s2">&quot;auth_username&quot;</span><span class="p">:</span> <span class="s2">&quot;vrnetlab&quot;</span><span class="p">,</span>
   <span class="s2">&quot;auth_password&quot;</span><span class="p">:</span> <span class="s2">&quot;VR-netlab9&quot;</span><span class="p">,</span>
   <span class="s2">&quot;auth_strict_key&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
   <span class="s2">&quot;platform&quot;</span><span class="p">:</span> <span class="s2">&quot;cisco_iosxe&quot;</span>
<span class="p">}</span>
<span class="k">with</span> <span class="n">Scrapli</span><span class="p">(</span><span class="o">**</span><span class="n">device</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">cfg_conn</span> <span class="o">=</span> <span class="n">ScrapliCfg</span><span class="p">(</span><span class="n">conn</span><span class="o">=</span><span class="n">conn</span><span class="p">)</span>
    <span class="n">cfg_conn</span><span class="o">.</span><span class="n">prepare</span><span class="p">()</span>
    <span class="n">version_result</span> <span class="o">=</span> <span class="n">cfg_conn</span><span class="o">.</span><span class="n">get_version</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">version_result</span><span class="o">.</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="get-config">Get Config<a class="headerlink" href="#get-config" title="Permanent link">&para;</a></h3>
<p>The <code>get_config</code> method does exactly what you would think it does, it fetches the device configuration as a string. 
This method supports a <code>source</code> argument to which you can provide a string representing the source config you would 
like to get -- generally this will be either "startup" or "running".</p>
<p>A simple example of fetching and printing the device startup configuration:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">scrapli</span> <span class="kn">import</span> <span class="n">Scrapli</span>
<span class="kn">from</span> <span class="nn">scrapli_cfg</span> <span class="kn">import</span> <span class="n">ScrapliCfg</span>

<span class="n">device</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;172.18.0.11&quot;</span><span class="p">,</span>
   <span class="s2">&quot;auth_username&quot;</span><span class="p">:</span> <span class="s2">&quot;vrnetlab&quot;</span><span class="p">,</span>
   <span class="s2">&quot;auth_password&quot;</span><span class="p">:</span> <span class="s2">&quot;VR-netlab9&quot;</span><span class="p">,</span>
   <span class="s2">&quot;auth_strict_key&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
   <span class="s2">&quot;platform&quot;</span><span class="p">:</span> <span class="s2">&quot;cisco_iosxe&quot;</span>
<span class="p">}</span>
<span class="k">with</span> <span class="n">Scrapli</span><span class="p">(</span><span class="o">**</span><span class="n">device</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">cfg_conn</span> <span class="o">=</span> <span class="n">ScrapliCfg</span><span class="p">(</span><span class="n">conn</span><span class="o">=</span><span class="n">conn</span><span class="p">)</span>
    <span class="n">cfg_conn</span><span class="o">.</span><span class="n">prepare</span><span class="p">()</span>
    <span class="n">cfg_result</span> <span class="o">=</span> <span class="n">cfg_conn</span><span class="o">.</span><span class="n">get_config</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="s2">&quot;startup&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">cfg_result</span><span class="o">.</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="get-checkpoint-nxos-only">Get Checkpoint (NXOS Only)<a class="headerlink" href="#get-checkpoint-nxos-only" title="Permanent link">&para;</a></h3>
<p>NXOS can be a little... difficult with configuration replacement operations. It expects to be fed "checkpoint" files 
instead of "normal" configuration text. In order to make life a bit easier the NXOS platform supports a 
<code>get_checkpoint</code> method that fetches a checkpoint file from the device. This is basically the same overall behavior 
as <code>get_config</code>, just resulting in fetching a checkpoint file. Some details about checkpoints can be found 
<a href="https://www.cisco.com/c/en/us/td/docs/switches/datacenter/nexus9000/sw/6-x/system_management/configuration/guide/b_Cisco_Nexus_9000_Series_NX-OS_System_Management_Configuration_Guide/sm_7rollback.html">here</a>.</p>
<p>A simple example of fetching and printing a checkpoint file from an NXOS device:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">scrapli</span> <span class="kn">import</span> <span class="n">Scrapli</span>
<span class="kn">from</span> <span class="nn">scrapli_cfg</span> <span class="kn">import</span> <span class="n">ScrapliCfg</span>

<span class="n">device</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;172.18.0.12&quot;</span><span class="p">,</span>
   <span class="s2">&quot;auth_username&quot;</span><span class="p">:</span> <span class="s2">&quot;vrnetlab&quot;</span><span class="p">,</span>
   <span class="s2">&quot;auth_password&quot;</span><span class="p">:</span> <span class="s2">&quot;VR-netlab9&quot;</span><span class="p">,</span>
   <span class="s2">&quot;auth_strict_key&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
   <span class="s2">&quot;platform&quot;</span><span class="p">:</span> <span class="s2">&quot;cisco_nxos&quot;</span>
<span class="p">}</span>
<span class="k">with</span> <span class="n">Scrapli</span><span class="p">(</span><span class="o">**</span><span class="n">device</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">cfg_conn</span> <span class="o">=</span> <span class="n">ScrapliCfg</span><span class="p">(</span><span class="n">conn</span><span class="o">=</span><span class="n">conn</span><span class="p">)</span>
    <span class="n">cfg_conn</span><span class="o">.</span><span class="n">prepare</span><span class="p">()</span>
    <span class="n">chkpoint_result</span> <span class="o">=</span> <span class="n">cfg_conn</span><span class="o">.</span><span class="n">get_checkpoint</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">chkpoint_result</span><span class="o">.</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="load-config">Load Config<a class="headerlink" href="#load-config" title="Permanent link">&para;</a></h3>
<p>Another, hopefully very obviously named method! <code>load_config</code> does what it sounds like. <code>load_config</code> accepts a 
configuration to load (as a string; note that if you are doing config replace with NXOS you should use a checkpoint 
file!), optionally a bool indicating if the operation is a "replace" operation (default is <code>False</code> it is a <em>merge</em> 
operation), and lastly some optional keyword arguments that vary from platform to platform.</p>
<p>If <code>replace</code> is <code>False</code> (default) then the config will be loaded as a <em>merge</em> candidate, otherwise it will be loaded 
as a full <em>replace</em> candidate.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">scrapli</span> <span class="kn">import</span> <span class="n">Scrapli</span>
<span class="kn">from</span> <span class="nn">scrapli_cfg</span> <span class="kn">import</span> <span class="n">ScrapliCfg</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;config&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">my_config</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="n">device</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;172.18.0.11&quot;</span><span class="p">,</span>
   <span class="s2">&quot;auth_username&quot;</span><span class="p">:</span> <span class="s2">&quot;vrnetlab&quot;</span><span class="p">,</span>
   <span class="s2">&quot;auth_password&quot;</span><span class="p">:</span> <span class="s2">&quot;VR-netlab9&quot;</span><span class="p">,</span>
   <span class="s2">&quot;auth_strict_key&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
   <span class="s2">&quot;platform&quot;</span><span class="p">:</span> <span class="s2">&quot;cisco_iosxe&quot;</span>
<span class="p">}</span>
<span class="k">with</span> <span class="n">Scrapli</span><span class="p">(</span><span class="o">**</span><span class="n">device</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">cfg_conn</span> <span class="o">=</span> <span class="n">ScrapliCfg</span><span class="p">(</span><span class="n">conn</span><span class="o">=</span><span class="n">conn</span><span class="p">)</span>
    <span class="n">cfg_conn</span><span class="o">.</span><span class="n">prepare</span><span class="p">()</span>
    <span class="n">load_result</span> <span class="o">=</span> <span class="n">cfg_conn</span><span class="o">.</span><span class="n">load_config</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">my_config</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">load_result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Note that <em>loading</em> a configuration does <em>not</em> apply the configuration! This simply will create a configuration 
session or a file on the device (depending on the specific platform type) that can be used to merge/replace the config.</p>
<h3 id="abort-config">Abort Config<a class="headerlink" href="#abort-config" title="Permanent link">&para;</a></h3>
<p>If you've loaded a configuration but don't want to commit it, you can call <code>abort_config</code> which will delete the 
candidate config/delete config sessions used to load the config.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">scrapli</span> <span class="kn">import</span> <span class="n">Scrapli</span>
<span class="kn">from</span> <span class="nn">scrapli_cfg</span> <span class="kn">import</span> <span class="n">ScrapliCfg</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;config&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">my_config</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="n">device</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;172.18.0.11&quot;</span><span class="p">,</span>
   <span class="s2">&quot;auth_username&quot;</span><span class="p">:</span> <span class="s2">&quot;vrnetlab&quot;</span><span class="p">,</span>
   <span class="s2">&quot;auth_password&quot;</span><span class="p">:</span> <span class="s2">&quot;VR-netlab9&quot;</span><span class="p">,</span>
   <span class="s2">&quot;auth_strict_key&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
   <span class="s2">&quot;platform&quot;</span><span class="p">:</span> <span class="s2">&quot;cisco_iosxe&quot;</span>
<span class="p">}</span>
<span class="k">with</span> <span class="n">Scrapli</span><span class="p">(</span><span class="o">**</span><span class="n">device</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">cfg_conn</span> <span class="o">=</span> <span class="n">ScrapliCfg</span><span class="p">(</span><span class="n">conn</span><span class="o">=</span><span class="n">conn</span><span class="p">)</span>
    <span class="n">cfg_conn</span><span class="o">.</span><span class="n">prepare</span><span class="p">()</span>
    <span class="n">load_result</span> <span class="o">=</span> <span class="n">cfg_conn</span><span class="o">.</span><span class="n">load_config</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">my_config</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">load_result</span><span class="p">)</span>
    <span class="n">abort_result</span> <span class="o">=</span> <span class="n">cfg_conn</span><span class="o">.</span><span class="n">abort_config</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">abort_result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="commit-config">Commit Config<a class="headerlink" href="#commit-config" title="Permanent link">&para;</a></h3>
<p>If you've loaded a config and want to save/commit it you can do so with the <code>commit_config</code> method:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">scrapli</span> <span class="kn">import</span> <span class="n">Scrapli</span>
<span class="kn">from</span> <span class="nn">scrapli_cfg</span> <span class="kn">import</span> <span class="n">ScrapliCfg</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;config&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">my_config</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="n">device</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;172.18.0.11&quot;</span><span class="p">,</span>
   <span class="s2">&quot;auth_username&quot;</span><span class="p">:</span> <span class="s2">&quot;vrnetlab&quot;</span><span class="p">,</span>
   <span class="s2">&quot;auth_password&quot;</span><span class="p">:</span> <span class="s2">&quot;VR-netlab9&quot;</span><span class="p">,</span>
   <span class="s2">&quot;auth_strict_key&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
   <span class="s2">&quot;platform&quot;</span><span class="p">:</span> <span class="s2">&quot;cisco_iosxe&quot;</span>
<span class="p">}</span>
<span class="k">with</span> <span class="n">Scrapli</span><span class="p">(</span><span class="o">**</span><span class="n">device</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">cfg_conn</span> <span class="o">=</span> <span class="n">ScrapliCfg</span><span class="p">(</span><span class="n">conn</span><span class="o">=</span><span class="n">conn</span><span class="p">)</span>
    <span class="n">cfg_conn</span><span class="o">.</span><span class="n">prepare</span><span class="p">()</span>
    <span class="n">load_result</span> <span class="o">=</span> <span class="n">cfg_conn</span><span class="o">.</span><span class="n">load_config</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">my_config</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">load_result</span><span class="p">)</span>
    <span class="n">commit_result</span> <span class="o">=</span> <span class="n">cfg_conn</span><span class="o">.</span><span class="n">commit_config</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">commit_result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="diff-config">Diff Config<a class="headerlink" href="#diff-config" title="Permanent link">&para;</a></h3>
<p>Perhaps the most interesting/handy method of all: <code>diff_config</code>! Just like the other methods, this method does 
exactly what it sounds like it would. There is one important difference between this method and the others, however; 
the <code>diff_config</code> method returns a <code>ScrapliCfgDiffResponse</code> object instead of a <code>ScrapliCfgResponse</code> object. The 
<code>ScrapliCfgDiffResponse</code> object is <em>mostly</em> the same as a normal scrapli_cfg response, but it also contains some 
properties that contain the diff output.</p>
<p>scrapli_cfg always tries to get a diff from the device itself -- from whatever means are available on box, but also 
builds some basic diffs of its own. The diffs that scrapli_cfg builds are fairly simple and will show the difference 
between the candidate config and the target config, but will have no context about merge vs replace operations, so 
the diff will always show the "full" configuration diff (with colorful output though!). </p>
<p>You can see each of the diffs like so:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">scrapli</span> <span class="kn">import</span> <span class="n">Scrapli</span>
<span class="kn">from</span> <span class="nn">scrapli_cfg</span> <span class="kn">import</span> <span class="n">ScrapliCfg</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;config&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">my_config</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="n">device</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;172.18.0.11&quot;</span><span class="p">,</span>
   <span class="s2">&quot;auth_username&quot;</span><span class="p">:</span> <span class="s2">&quot;vrnetlab&quot;</span><span class="p">,</span>
   <span class="s2">&quot;auth_password&quot;</span><span class="p">:</span> <span class="s2">&quot;VR-netlab9&quot;</span><span class="p">,</span>
   <span class="s2">&quot;auth_strict_key&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
   <span class="s2">&quot;platform&quot;</span><span class="p">:</span> <span class="s2">&quot;cisco_iosxe&quot;</span>
<span class="p">}</span>
<span class="k">with</span> <span class="n">Scrapli</span><span class="p">(</span><span class="o">**</span><span class="n">device</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">cfg_conn</span> <span class="o">=</span> <span class="n">ScrapliCfg</span><span class="p">(</span><span class="n">conn</span><span class="o">=</span><span class="n">conn</span><span class="p">)</span>
    <span class="n">cfg_conn</span><span class="o">.</span><span class="n">prepare</span><span class="p">()</span>
    <span class="n">load_result</span> <span class="o">=</span> <span class="n">cfg_conn</span><span class="o">.</span><span class="n">load_config</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">my_config</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">load_result</span><span class="p">)</span>
    <span class="n">diff_result</span> <span class="o">=</span> <span class="n">cfg_conn</span><span class="o">.</span><span class="n">diff_config</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">diff_result</span><span class="o">.</span><span class="n">device_diff</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">diff_result</span><span class="o">.</span><span class="n">unified_diff</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">diff_result</span><span class="o">.</span><span class="n">side_by_side_diff</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="render-substituted-config">Render Substituted Config<a class="headerlink" href="#render-substituted-config" title="Permanent link">&para;</a></h3>
<p>The <code>render_substituted_config</code> method is used to (based on user provided regex) auto merge a candidate 
configuration with sections of the current device configuration. This is meant to allow users an easy-ish way to 
start doing config replace operations, without having to have a template that covers all aspects of the device 
configuration.</p>
<p>For example, let's say you want to manage everything on a switch <em>except</em> the interfaces. Maybe you want to do this 
because managing loads of templates for all the different types of interfaces/platforms is a pain, or maybe a 
different team manages that part of the config... whatever the case you want to be able to do full config replaces, 
but leave that part of the config completely untouched. This is what the <code>render_substitued_config</code> method is 
designed to help you with.</p>
<p>Here is an example of using this method:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">scrapli</span> <span class="kn">import</span> <span class="n">Scrapli</span>
<span class="kn">from</span> <span class="nn">scrapli_cfg</span> <span class="kn">import</span> <span class="n">ScrapliCfg</span>
<span class="kn">from</span> <span class="nn">scrapli_cfg.platform.core.arista_eos.patterns</span> <span class="kn">import</span> <span class="n">ETHERNET_INTERFACES</span>


<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;config&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">my_config</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="n">device</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;172.18.0.14&quot;</span><span class="p">,</span>
   <span class="s2">&quot;auth_username&quot;</span><span class="p">:</span> <span class="s2">&quot;vrnetlab&quot;</span><span class="p">,</span>
   <span class="s2">&quot;auth_password&quot;</span><span class="p">:</span> <span class="s2">&quot;VR-netlab9&quot;</span><span class="p">,</span>
   <span class="s2">&quot;auth_strict_key&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
   <span class="s2">&quot;platform&quot;</span><span class="p">:</span> <span class="s2">&quot;arista_eos&quot;</span>
<span class="p">}</span>
<span class="k">with</span> <span class="n">Scrapli</span><span class="p">(</span><span class="o">**</span><span class="n">device</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">cfg_conn</span> <span class="o">=</span> <span class="n">ScrapliCfg</span><span class="p">(</span><span class="n">conn</span><span class="o">=</span><span class="n">conn</span><span class="p">)</span>
    <span class="n">cfg_conn</span><span class="o">.</span><span class="n">prepare</span><span class="p">()</span>
    <span class="n">rendered_config</span> <span class="o">=</span> <span class="n">cfg_conn</span><span class="o">.</span><span class="n">render_substituted_config</span><span class="p">(</span>
        <span class="n">config_template</span><span class="o">=</span><span class="n">my_config</span><span class="p">,</span> <span class="n">substitutes</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;ethernet_interfaces&quot;</span><span class="p">,</span> <span class="n">ETHERNET_INTERFACES</span><span class="p">)]</span>
    <span class="p">)</span>
    <span class="n">load_result</span> <span class="o">=</span> <span class="n">cfg_conn</span><span class="o">.</span><span class="n">load_config</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">my_config</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">load_result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>In the above example we have a fairly "normal" scrapli_cfg setup -- create a connection and open it. Once the 
connection is opened we call the <code>render_substituted_config</code> and we pass a <code>config_template</code> and a list of 
<code>substitutes</code> to it. The config template is what it sounds like -- a template (that looks like a jinja2 template). 
In this case, this template has a variable <code>ethernet_interfaces</code> in the file where the ethernet interfaces <em>would</em> 
go, so instead of something like this:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code>username vrnetlab role network-admin secret sha512 $6$8zrJ4ESW2fqG2QqH$9u768TvLXXDeUJmG2Std71EX1ip6q4MoJrMwDng1cmpuSYc9ECWytRjvXpMH7C3dzSdoEv0MxAUiAZeeTre3h.
!
interface Ethernet 1
  description tacocat
!
&lt;&lt; SNIP &gt;&gt;
interface Management1
</code></pre></div></td></tr></table></div>
<p>We have something like this:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>username vrnetlab role network-admin secret sha512 $6$8zrJ4ESW2fqG2QqH$9u768TvLXXDeUJmG2Std71EX1ip6q4MoJrMwDng1cmpuSYc9ECWytRjvXpMH7C3dzSdoEv0MxAUiAZeeTre3h.
!
{{ ethernet_interfaces }}
interface Management1
</code></pre></div></td></tr></table></div>
<p>The <code>substitutes</code> we passed into the <code>render_substituted_config</code> method is a list of tuples, where the first item in 
the tuple is the variable we want to replace (<code>ethernet_interfaces</code> in this case) and the second value is a regular 
expression that matches the section of the real running config that we want to put into this variable.</p>
<p>Ultimately, using this example, if we had a "real" running configuration containing the following interface section 
(just using one interface to keep things simple) that looked like this:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code>username vrnetlab role network-admin secret sha512 $6$8zrJ4ESW2fqG2QqH$9u768TvLXXDeUJmG2Std71EX1ip6q4MoJrMwDng1cmpuSYc9ECWytRjvXpMH7C3dzSdoEv0MxAUiAZeeTre3h.
!
interface Ethernet 1
  description tacocat
!
interface Management1
</code></pre></div></td></tr></table></div>
<p>Our rendered template would end up looking just like that. Again, the point of this method is to allow you to more 
easily do configuration replaces without having to fully template out device configs. The obvious downside to this 
method is that it may require fairly complicated regular expressions in order to properly slice and dice the real 
config.</p>
<h2 id="on-prepare">On Prepare<a class="headerlink" href="#on-prepare" title="Permanent link">&para;</a></h2>
<p>The <code>on_prepare</code> argument of the scrapli-cfg objects gives users the opportunity to pass a callable that will be 
executed prior to any operations occurring (this happens during the aptly named "prepare" method which you should be 
calling prior to using scrapli_cfg operations -- note that if you use the context manager functionality this will 
already be called for you!). The purpose of this <code>on_prepare</code> callable is to... prepare a device for config 
operations. Initially scrapli_cfg platforms contained a sane default <code>on_prepare</code> function that basically just 
disabled console logging. The reasoning for disabling console logging is to ensure that any <code>get_config</code> operations 
don't have log messages garbling up the output.</p>
<p>This "sane default" setting has since been removed as it was a bit too much "magic" -- meaning that it felt wrong 
for scrapli_cfg to be making any kind of persistent configuration changes to your devices potentially without users 
being aware that was happening. As such, it would be a good idea to provide an <code>on_prepare</code> callable to at the very 
least disable console logging.</p>

              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../installation/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Installation" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Installation
            </div>
          </div>
        </a>
      
      
        
        <a href="../../api_docs/platform/base/async_platform/" class="md-footer__link md-footer__link--next" aria-label="Next: Base Platform" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Base Platform
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/carlmontanari/" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://twitter.com/carlrmontanari" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://www.linkedin.com/in/carl-montanari-47888931/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://montanari.io" target="_blank" rel="noopener" title="montanari.io" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M352 256c0 22.2-1.2 43.6-3.3 64H163.3c-2.1-20.4-4.2-41.8-4.2-64 0-22.2 2.1-43.6 4.2-64h185.4c2.1 20.4 3.3 41.8 3.3 64zm151.9-64c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H380.8c2.1-20.6 3.2-42.9 3.2-64 0-22-1.1-43.4-3.2-64h123.1zm-10.5-32H376.7c-10-63.86-29.8-117.38-55.3-151.558C399.8 29.09 463.4 85.94 493.4 160zm-149.1 0H167.7c6.1-36.4 15.5-68.62 27-94.65 10.5-23.61 22.2-40.74 33.5-51.54C239.4 3.178 248.7 0 256 0c7.3 0 16.6 3.178 27.8 13.81 11.3 10.8 23 27.93 33.5 51.54 11.5 26.03 20.9 58.25 27 94.65zm-325.69 0C48.59 85.94 112.2 29.09 190.6 8.442 165.1 42.62 145.3 96.14 135.3 160H18.61zm112.59 32c-2.1 20.6-4.1 42-4.1 64 0 21.1 2 43.4 4.1 64H8.065C2.8 299.5 0 278.1 0 256s2.8-43.5 8.065-64H131.2zm63.5 254.6c-11.5-26-20.9-58.2-27-94.6h176.6c-6.1 36.4-15.5 68.6-27 94.6-10.5 23.7-22.2 40.8-33.5 51.6-11.2 10.6-20.5 13.8-28.7 13.8-6.4 0-15.7-3.2-26.9-13.8-11.3-10.8-23-27.9-33.5-51.6zm-4.1 57C112.2 482.9 48.59 426.1 18.61 352H135.3c10 63.9 29.8 117.4 55.3 151.6zm130.8 0c25.5-34.2 45.3-87.7 55.3-151.6h116.7c-30 74.1-93.6 130.9-172 151.6z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.6c7ad80a.min.js"></script>
      
    
  </body>
</html>